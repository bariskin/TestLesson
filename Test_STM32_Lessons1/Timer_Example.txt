Таймеры stm32 делятся на три вида:

Advanced-control timers (TIM1 и TIM8) — самые «нафаршированные».
General-purpose timers (TIM2, TIM3, TIM4, TIM5) — функционал чуть меньше чем у предыдущих.
Basic timers (все остальные) — сильно урезанный функционал.


/* USER CODE BEGIN 2 */
   HAL_TIM_Base_Start_IT(&htim1);
/* USER CODE END 2 */

В колбеке мигаем светиком:

/* USER CODE BEGIN 0 */

void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)
{
        if(htim->Instance == TIM1) //check if the interrupt comes from TIM1
        {
                HAL_GPIO_TogglePin(led13_GPIO_Port, led13_Pin); 
        }

/* USER CODE END 0 */

Сначала коротко о NVIC (Nested Vector Interrupt Controller) — контроллер вложенных векторных прерываний. 
NVIC устроен так, что прерывание происходит не само по себе, а его вызывает аппаратное событие — Event. 
То есть когда например таймер переполняется, происходит Event обновления (Update event), и если разрешено прерывание, 
тогда Event «приказывает» этому прерыванию произойти. Если прерывание не разрешено, то Event в любом случае происходит,
но прерывание не вызывается.

Когда вы инициализируете таймер и записываете значения 
в Prescaler и в Repetition counter, то они применяются не сразу, а только после того 
как таймер отработает цикл и произойдёт Update event. Так устроена система.

Пока новые значения не применились, мы не можем знать что там записано, 
может ноль, а может какой-то мусор. Следовательно мы не знаем когда произойдёт первое прерывание, 
и произойдёт ли вообще, и будет ли работать таймер. Поэтому сразу после инициализации нужно
принудительно сгенерировать (записать в нужный регистр соответствующий бит) этот самый Update event.
Таким образом наши новые значения будут применены при инициализации и всё будет хорошо.



Теперь давайте познакомимся с каналами таймера.

У каждого таймера есть четыре независимых канала, которые могут подключаться к физическим пинам микроконтроллера,
 то есть работать как внешние входы/выходы, а могут и не подключаться, и работать как внутренние входы/выходы для
 взаимодействия с другими таймерами. У некоторых МК, например у F303, есть доп. каналы (5 и 6) не имеющие выхода наружу.

